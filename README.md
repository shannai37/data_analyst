# 🤖 AstrBot 数据分析师插件

> **智能数据分析师 | 支持自然语言交互 | 用户画像分析 | 专业词云生成**

一个功能强大的 AstrBot 群聊数据分析插件，提供智能数据统计、可视化图表、用户画像分析和自然语言交互功能。

## ✨ **核心特色**

### 🎯 **自然语言交互**
- **直接说话就能用！** 无需记忆复杂命令
- 支持超过100种中文表达方式
- 智能意图识别，高精度命令匹配

### 🎨 **专业词云生成**
- 多种精美样式：简约、现代、科技、游戏风格
- 历史对比功能：追踪热词变化趋势
- 智能字体管理：完美显示中文内容

### 👤 **智能用户画像**
- 基于 LLM 的性格分析
- 多维度行为特征提取
- 用户对比和相似度分析

### 📊 **数据可视化**
- 现代化图表设计
- 实时活跃度分析
- 多格式数据导出

## 🚀 **快速开始**

### 安装依赖
```bash
pip install -r astrbot_plugin_data_analyst/requirements.txt
```

### 基础使用

#### 🗣️ **自然语言命令（推荐）**
```
# 词云生成
"今日词云"              # 生成今天的热词统计
"大家都在聊什么"         # 看看群里最热门话题
"好看的词云"            # 生成精美样式词云

# 数据统计  
"看看数据"              # 查看群组活跃度
"群里怎么样"            # 了解聊天情况
"谁最活跃"              # 查看发言排行榜

# 用户画像
"我的画像"              # 生成个人性格分析
"分析一下我"            # 深度分析你的特征
"我和他像吗"            # 用户相似度对比

# 帮助功能
"有什么功能"            # 查看所有功能
"怎么用"               # 获取使用说明
```

#### 📋 **传统命令**
```bash
/stats                  # 快速统计
/chart wordcloud        # 词云图
/chart ranking          # 用户排行榜
/chart activity         # 活跃度图表
/chart heatmap         # 活跃时段热力图
/portrait              # 用户画像
/compare @user1 @user2 # 用户对比
/analyze               # 话题分析
/export excel          # 导出Excel报告
/help_data             # 完整帮助
```

## 🎨 **功能详解**

### 1. **智能词云生成**

#### 自然语言方式
```
"今日词云"              # 标准词云
"简约词云"              # 优雅风格  
"现代词云"              # 科技风格
"好看的词云"            # 精美样式
"词云对比"              # 历史对比
```

#### 传统命令方式
```bash
/chart wordcloud        # 生成标准词云
/chart wordcloud --style elegant  # 指定样式
```

**支持样式**：
- `elegant` - 简约优雅风格
- `modern` - 现代科技风格  
- `gaming` - 游戏竞技风格
- `ranking` - 排行榜风格

### 2. **用户画像分析**

#### 自然语言方式
```
"我的画像"              # 生成个人画像
"分析一下我"            # 深度性格分析
"我是什么性格"          # 性格特征识别
"给我做个分析"          # 全面特征分析
"我和他像吗"            # 用户相似度对比
```

#### 传统命令方式
```bash
/portrait               # 生成自己的画像
/portrait deep          # 深度分析模式
/portrait @username     # 分析指定用户
/compare @user1 @user2  # 对比两个用户
```

**分析维度**：
- 交流风格分析
- 活跃时间模式
- 话题偏好统计
- 性格特征标签
- 社交影响力评估

### 3. **数据统计分析**

#### 自然语言方式
```
"看看数据"              # 群组统计概览
"群里怎么样"            # 活跃度分析
"发言情况"              # 消息统计
"谁最活跃"              # 活跃排行
"最近怎样"              # 近期趋势
```

#### 传统命令方式
```bash
/stats                  # 快速统计
/chart ranking          # 用户排行榜
/chart activity         # 活跃度趋势
/chart heatmap         # 时段热力图
```

### 4. **数据导出功能**

```bash
/export excel           # 导出Excel报告
/export pdf            # 导出PDF报告  
/export json           # 导出JSON数据
/export csv            # 导出CSV文件
```

## 🔧 **配置选项**

### 基础配置
```json
{
  "enabled_groups": [],           // 允许使用的群组，空数组表示全部
  "admin_users": [],             // 管理员用户列表
  "max_chart_items": 10,         // 图表最大显示项目数
  "chart_dpi": 150,             // 图表分辨率
  "cache_ttl": 3600             // 缓存有效期（秒）
}
```

### 隐私设置
```json
{
  "privacy_settings": {
    "anonymize_users": false,     // 是否匿名化用户名
    "blur_sensitive_data": false, // 是否模糊敏感数据
    "exclude_patterns": []        // 排除的消息模式
  }
}
```

## 📊 **支持的图表类型**

### 📈 **活跃度图表**
- 时间趋势分析
- 峰值检测
- 平均线显示

### 🏆 **用户排行榜**
- 消息数量排行
- 发言字数排行
- 奖牌徽章系统

### 🎨 **词云图表**
- 多样化色彩方案
- 自适应布局
- 中文字体优化

### 🔥 **活跃时段热力图**
- 24小时活跃分布
- 智能时段标注
- 渐变色彩显示

## 🎯 **自然语言命令大全**

### 🎨 **词云相关**
```
基础表达：
- "词云" "热词" "关键词" "话题统计"
- "大家都在聊什么" "最近聊什么" "群里聊什么"
- "看看话题" "分析话题" "热门话题"

时间指定：
- "今日词云" "今天聊什么" "最近热词"
- "本周话题" "这周聊什么"

样式指定：
- "好看的词云" "漂亮词云" "精美词云"
- "简约词云" "现代词云" "酷炫词云"

对比分析：
- "词云对比" "词云变化" "热词变化"
- "趋势分析" "变化分析"
```

### 📊 **统计相关**
```
基础表达：
- "数据" "统计" "活跃度" "发言情况"
- "看看数据" "群里怎么样" "活跃情况"
- "聊天情况" "发言统计" "群活跃度"

排行相关：
- "谁最活跃" "活跃排行" "发言排行"
- "最活跃的人" "谁话最多" "谁最爱聊天"

时间相关：
- "今日数据" "最近怎样" "近期统计"
- "本周数据" "今天情况" "最近情况"
```

### 👤 **画像相关**
```
基础表达：
- "画像" "用户画像" "性格分析" "分析我"
- "分析一下我" "我是什么性格" "我的特点"
- "给我做个分析" "我是怎样的人"

特征分析：
- "我的特征" "我的个性" "我的人格"
- "我的聊天风格" "我的表达方式"

对比分析：
- "我和他像吗" "我们像吗" "性格相似"
- "用户对比" "性格对比" "特征对比"

深度分析：
- "深度分析" "详细分析" "完整分析"
- "深度画像" "全方位分析"
```

### ❓ **帮助相关**
```
基础表达：
- "帮助" "怎么用" "功能" "用法"
- "有什么功能" "能做什么" "支持什么"
- "什么指令" "有哪些命令"

学习相关：
- "不会用" "不知道怎么用" "教教我"
- "怎么玩" "怎么操作" "如何使用"
```

## ⚙️ **高级功能**

### 🔍 **智能数据挖掘**
- 自动识别热门话题
- 异常活跃检测
- 用户行为模式分析

### 📈 **预测分析**
- 活跃度趋势预测
- 用户参与度预估
- 话题热度预测

### 🎨 **个性化定制**
- 自定义颜色方案
- 个性化图表样式
- 专属画像模板

## 🛠️ **技术特色**

### 🧠 **AI 驱动**
- LLM 性格分析引擎
- 智能自然语言处理
- 机器学习特征提取

### 🎨 **视觉优化**
- 现代化 UI 设计
- 中文字体完美支持
- 响应式图表布局

### ⚡ **性能优化**
- 智能缓存机制
- 异步数据处理
- 增量更新算法

## 🐛 **故障排除**

### 常见问题

#### Q: 中文显示为方格怎么办？
A: 插件已集成智能字体管理，会自动检测和配置中文字体。如果仍有问题，请确保系统安装了中文字体包。

#### Q: 自然语言命令不响应？
A: 请确保：
1. 消息不以 `/` 开头
2. 包含关键词（如"词云"、"数据"等）
3. 字符长度在2-100之间

#### Q: 用户画像生成失败？
A: 需要用户在群内有足够的发言记录（至少10条消息）。

#### Q: 数据导出失败？
A: 检查是否有管理员权限，确保数据目录可写。

### 错误码说明
- `DB_001`: 数据库连接失败
- `FONT_002`: 字体配置错误
- `NLP_003`: 自然语言处理失败
- `CHART_004`: 图表生成错误

## 📝 **更新日志**

### v1.0.0 (2024-09-29)
#### 🚀 **新功能**
- **自然语言交互**: 支持100+种中文表达方式
- **智能用户画像**: LLM驱动的性格分析系统
- **专业词云生成**: 多样式、历史对比功能
- **强化字体管理**: 彻底解决中文显示问题

#### 🔧 **技术改进**
- 全新的异步架构设计
- 智能缓存机制
- 模块化组件系统
- 完善的错误处理

#### 🎨 **视觉优化**
- 现代化图表设计
- 渐变色彩方案
- 奖牌徽章系统
- 响应式布局

## 🤝 **贡献指南**

欢迎提交 Issue 和 Pull Request！

### 开发环境设置
```bash
git clone <repository>
cd astrbot_plugin_data_analyst
pip install -r requirements.txt
```

### 代码风格
- 使用 Python 3.8+ 特性
- 遵循 PEP 8 规范
- 添加详细的中文注释
- 编写单元测试

## 📄 **许可证**

MIT License

## 💬 **联系我们**

- 提交 Issue: [GitHub Issues](https://github.com/your-repo/issues)
- 功能建议: [Discussions](https://github.com/your-repo/discussions)

---

**🎉 享受智能数据分析的乐趣！**